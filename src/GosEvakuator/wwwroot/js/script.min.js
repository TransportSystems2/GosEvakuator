var showView=function(n){var t=document.querySelector(n);Boolean(t)&&t.classList.add("show")},closeView=function(n){var t=document.querySelector(n);Boolean(t)&&t.classList.remove("show")},showModalView=function(n){showView(".modal_overlay");showView(n)},closeModalView=function(n){closeView(".modal_overlay");closeView(n)},closeAllView=function(){closeModalView(".modal-order")},modalOverlayView=document.querySelector(".modal_overlay"),orderButton,closeBuyButton,orderForm,$orderFormPhoneNumber,calcualteForm;modalOverlayView.addEventListener("click",function(n){n.preventDefault();closeAllView()});window.addEventListener("keydown",function(n){n.keyCode===27&&closeAllView()});orderButton=document.querySelector(".order__form-submit");closeBuyButton=document.querySelector(".model-order__close");closeBuyButton.addEventListener("click",function(n){n.preventDefault();closeModalView(".modal-order")});orderForm=document.querySelector(".order__form");$orderFormPhoneNumber=$(".order__form-phone-number-value");$orderFormPhoneNumber.inputmask("+7(999)999-99-99");$orderFormPhoneNumber.focus(function(){$orderFormPhoneNumber.removeClass("invalid-value")});var $orderFormVehicle=$(".order__form-vehicle-value"),$orderFormSteeringLock=$("#steering-lock-field"),$orderFormWheelLock=$("#wheel-lock-field"),$orderFormTotalPrice=$(".order__form-total-price-value"),$orderFormGuaranteePrice=$(".order__guarantee-price-value"),$orderFormGuaranteePriceFromOther=$(".order__guarantee-price-from-other-value"),$theirPrice=$(".their-price-value"),$ourPrice=$(".our-price-value"),calculateTotalCost=function(n,t,i,r){if(n!==undefined){var u=t?n.LoadingVehicleFromOther:n.LoadingVehicle;return i&&(u+=n.LockedSteeringWheel),u+r*n.LockedWheel}},recalculateTotalPrice=function(){var f=$orderFormVehicle.find(":selected"),e=f.attr("price"),t=$.parseJSON(e),i=$orderFormSteeringLock.is(":checked"),r=$orderFormWheelLock.is(":checked"),n=calculateTotalCost(t,!1,i,r),u=calculateTotalCost(t,!0,i,r);$orderFormTotalPrice.text(n);$orderFormGuaranteePrice.text(n);$orderFormGuaranteePriceFromOther.text(u);$theirPrice.text(u);$ourPrice.text(n)};$orderFormVehicle.change(function(){recalculateTotalPrice()});$orderFormSteeringLock.change(function(){recalculateTotalPrice()});$orderFormWheelLock.change(function(){recalculateTotalPrice()});var $modalOrderTitle=$(".model-order__title"),$modalOrderIndicatorMessage=$(".model-order__message"),$modalOrderIndicatorSpinner=$(".indicator__spinner"),$modalOrderIndicatorSuccess=$(".indicator__success"),$modalOrderIndicatorError=$(".indicator__error"),$modalOrderButtonClose=$(".model-order__close"),$modalOrderContactPhone=$(".model-order__contact-phone");orderForm.addEventListener("submit",function(n){var t,i;if(n.preventDefault(),t=Inputmask.isValid($orderFormPhoneNumber.val(),{alias:"+7(999)999-99-99"}),!t){$orderFormPhoneNumber.addClass("invalid-value");return}i=new FormData(orderForm);$modalOrderTitle.text("Подача заявки");$modalOrderIndicatorSpinner.show();$modalOrderIndicatorMessage.hide();$modalOrderIndicatorSuccess.hide();$modalOrderIndicatorError.hide();$modalOrderButtonClose.hide();$modalOrderContactPhone.hide();showModalView(".modal-order");$.ajax({type:"POST",url:orderForm.attributes.action.value,data:i,processData:!1,contentType:!1,success:function(){$modalOrderTitle.text("Заявка успешно принята!");$modalOrderIndicatorSuccess.show();$modalOrderIndicatorMessage.show();$modalOrderButtonClose.show();$modalOrderIndicatorSpinner.hide();$orderFormPhoneNumber.val("")},error:function(){$modalOrderIndicatorSpinner.hide();$modalOrderIndicatorError.show();$modalOrderContactPhone.show();$modalOrderIndicatorMessage.show();$modalOrderTitle.text("Нет связи с сервером");$modalOrderIndicatorMessage.text("В любом случае мы вам поможем, позвоните по телефону:")}})});calcualteForm=document.querySelector(".calculate__form");$calculateFormPhoneNumber=$(".calculate__form-phone-number-value");$calculateFormPhoneNumber.inputmask("+7(999)999-99-99");$calculateFormPhoneNumber.focus(function(){$calculateFormPhoneNumber.removeClass("invalid-value")});calcualteForm.addEventListener("submit",function(n){var t,i;if(n.preventDefault(),t=Inputmask.isValid($calculateFormPhoneNumber.val(),{alias:"+7(999)999-99-99"}),!t){$calculateFormPhoneNumber.addClass("invalid-value");return}i=new FormData(calcualteForm);$modalOrderTitle.text("Подача заявки");$modalOrderIndicatorSpinner.show();$modalOrderIndicatorMessage.hide();$modalOrderIndicatorSuccess.hide();$modalOrderIndicatorError.hide();$modalOrderButtonClose.hide();$modalOrderContactPhone.hide();showModalView(".modal-order");$.ajax({type:"POST",url:calcualteForm.attributes.action.value,data:i,processData:!1,contentType:!1,success:function(){$modalOrderTitle.text("Заявка успешно принята!");$modalOrderIndicatorSuccess.show();$modalOrderIndicatorMessage.show();$modalOrderButtonClose.show();$modalOrderIndicatorSpinner.hide();$orderFormPhoneNumber.val("")},error:function(){$modalOrderIndicatorSpinner.hide();$modalOrderIndicatorError.show();$modalOrderContactPhone.show();$modalOrderIndicatorMessage.show();$modalOrderTitle.text("Нет связи с сервером");$modalOrderIndicatorMessage.text("В любом случае мы вам поможем, позвоните по телефону:")}})});